<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    </head>
    <style>
        .over {
            background-color: orange;
        }
        .selected {
            background-color: green;
        }
    </style>

    <body>
        <div id="buttons"></div>
        <button id="reset">reset</button>
        <table id="table" border='1'>
            <tr>
              <thead>
                <th>name</th>
                <th>role</th>
                <th>house</th>
                <th>gender</th>
                <th>alignment</th>
              </thead>
            </tr>
        </table>
    </body>
        
      <script>
        // Cameron Shimmin
        // HW 7 - Potterific
        // 2.18.23
          
        // list of characters
        var characters = [
          {name:"Albus Dumbledore", role:"staff", house:"Gryffindor",gender:"m",alignment:"good"},    
          {name:"Nymphadora Tonks", role:"", house:"Hufflepuff",gender:"f",alignment:"good"},    
          {name:"Ron Weasley", role:"student", house:"Gryffindor",gender:"m",alignment:"good"},    
          {name:"Ginny Weasley", role:"student", house:"Gryffindor",gender:"f",alignment:"good"},    
          {name:"Hermione Granger", role:"student", house:"Gryffindor",gender:"f",alignment:"good"},    
          {name:"Mad-eye Moody", role:"staff", house:"",gender:"m",alignment:"good"},    
          {name:"Prof McGonagall", role:"staff", house:"Gryffindor",gender:"f",alignment:"good"},    
          {name:"Harry Potter", role:"student", house:"Gryffindor",gender:"m",alignment:"good"},    
          {name:"Draco Malfoy", role:"student", house:"Slytherin",gender:"m",alignment:"evil"},    
          {name:"Hagrid", role:"staff", house:"Gryffindor",gender:"m",alignment:"good"},    
          {name:"Luna Lovegood", role:"student", house:"Ravenclaw",gender:"f",alignment:"good"},    
          {name:"Voldemort", role:"", house:"Slytherin",gender:"m",alignment:"evil"},    
          {name:"Bellatrix Lestrange", role:"", house:"Slytherin",gender:"f",alignment:"evil"},           
          {name:"Severus Snape", role:"staff", house:"Slytherin",gender:"m",alignment:"?"}
        ];
        var houses = new Set();
          
        const displayHouse = (house = "all") => {
          $("tr").removeClass("selected over").css("background-color", "");
          $(`#table tbody tr`).show();
          
          if (house != "all") {
            $(`#table tbody tr:not(.${house})`).addClass("over").hide();
          } 
          $("#table tbody tr:visible").addClass("selected");
          $(".selected:odd").css("background-color", "orange");
          $("thead > tr").css("background-color", "grey");
        }
          
        const buildTable = () => {
          var tableBody = $("#table > tbody");
          
          characters.forEach((character) => {
            var row = tableBody[0].insertRow();
            let index = 0;
            
            for (let characterValue of Object.values(character)) {
              var cell = row.insertCell(index);
              cell.innerHTML = characterValue;
              index++;
            }
            
            var house = character.house;
            row.className = house;
            if (house != "") {
              houses.add(house);
            }
          });
        }

        const buildHouseButtons = () => {          
          var buttonDiv = $("#buttons");
          
          houses.forEach((house) => {
            var houseButton = document.createElement('button');
            houseButton.addEventListener("click", () => {
              displayHouse(house);
            });
            
            houseButton.innerText = house;
            buttonDiv[0].appendChild(houseButton);
          });
        }
          
        $(document).ready(function() {
          var resetButton = $("#reset")
          resetButton[0].addEventListener("click", () => {
            displayHouse()
          });
          buildTable();
          buildHouseButtons();
          displayHouse();
        });
      </script>
      <br>
      <a href="../index.html">Home</a>
</html>